var IdeaManager={};IdeaManager=IdeaManager||{},IdeaManager.Idea=IdeaManager.Idea||{},IdeaManager.Idea.ideaCLuster=function(e){function a(){function a(){t.close()}if(e("#idea-cluster-map").length){console.log("ideaCLuster");var o=[],n={zoom:14,center:ideaManager.cluster.center,panControl:!1,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP},r=new google.maps.Map(document.getElementById("idea-cluster-map"),n),t=new google.maps.InfoWindow({maxWidth:330});google.maps.event.addListener(r,"click",a);for(var i=new OverlappingMarkerSpiderfier(r,{markersWontMove:!0,markersWontHide:!0}),l=0,d=ideaManager.cluster.locations.length;l<d;l++)!function(){var e=ideaManager.cluster.locations[l],n="<h3>"+e.location+"</h3><p>"+e.excerpt+'</p><br><a target="_top" class="btn btn-md btn-primary" href="'+e.permalink+'">Read more</a>',d=new google.maps.LatLng(e.geo.lat,e.geo.lng),g=new google.maps.Marker({position:d,title:e.location});google.maps.event.addListener(g,"click",a),i.addMarker(g,function(e){t.setContent(n),t.open(r,g)}),o.push(g)}();window.map=r,window.oms=i;new MarkerClusterer(r,o,{imagePath:ideaManager.cluster.iconPath,zoomOnClick:!0,maxZoom:17,gridSize:20});google.maps.event.addListener(r,"zoom_changed",function(){r.getZoom()>18&&r.setZoom(18)})}}return new a}(jQuery),IdeaManager=IdeaManager||{},IdeaManager.Idea=IdeaManager.Idea||{},IdeaManager.Idea.renderMap=function(e){function a(){if(e(".idea-location").length){var a,o,n=e(".idea-location__map");a=new google.maps.Geocoder,e.each(n,function(r,t){var i=e(t).attr("data-location");a.geocode({address:i},function(a,t){if("OK"==t){var l=i.substr(0,i.indexOf(",")),d={zoom:15,center:a[0].geometry.location,disableDefaultUI:!0,zoomControl:!0,fullscreenControl:!0};o=new google.maps.Map(n[r],d);var g=new google.maps.InfoWindow({content:"<b>"+l+"</b>"}),s=new google.maps.Marker({map:o,position:a[0].geometry.location,icon:{path:google.maps.SymbolPath.CIRCLE,strokeColor:"#E553F9",scale:7},title:i});s.addListener("click",function(){g.open(o,s)})}else console.log("Error; Geocode was not successful: "+t),e("#location-box").parents("div[class^='grid-']").hide()})})}}return new a}(jQuery);