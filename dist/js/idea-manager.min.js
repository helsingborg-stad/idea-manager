var IdeaManager={};IdeaManager=IdeaManager||{},IdeaManager.Idea=IdeaManager.Idea||{},IdeaManager.Idea.ideaCluster=function(e){function a(){e(function(){e("#idea-cluster-map").length&&this.init()}.bind(this))}return a.prototype.init=function(){function a(){t.close()}var o={zoom:12,center:new google.maps.LatLng(56.046467,12.694512),panControl:!1,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP},n=new google.maps.Map(document.getElementById("idea-cluster-map"),o),t=(new google.maps.Geocoder,new google.maps.InfoWindow({maxWidth:330})),r=new google.maps.LatLngBounds;google.maps.event.addListener(n,"click",a);var i=new OverlappingMarkerSpiderfier(n,{markersWontMove:!0,markersWontHide:!0}),d=new MarkerClusterer(n,[],{imagePath:ideaManager.cluster.iconPath,zoomOnClick:!0,maxZoom:17,gridSize:20});google.maps.event.addListener(n,"zoom_changed",function(){n.getZoom()>18&&n.setZoom(18)}),e.when(this.getLocations()).then(function(e,o,g){"success"===o&&Array.isArray(e)&&(e.map(function(e,o){var g=new google.maps.Marker({position:new google.maps.LatLng(e.coordinates)}),s="<h3>"+e.title+"</h3><p>"+e.excerpt+'</p><br><a target="_top" class="btn btn-md btn-primary" href="'+e.permalink+'">'+ideaManager.readMore+"</a>";google.maps.event.addListener(g,"click",a),i.addMarker(g,function(e){t.setContent(s),t.open(n,g)}),d.addMarker(g,!0),r.extend(g.position)}),d.redraw(),n.panToBounds(r))})},a.prototype.getLocations=function(){return e.ajax({url:ajaxurl,type:"post",data:{action:"idea_locations"}})},new a}(jQuery),IdeaManager=IdeaManager||{},IdeaManager.Idea=IdeaManager.Idea||{},IdeaManager.Idea.singleMap=function(e){function a(){e(function(){e(".idea-map").length&&this.init()}.bind(this))}return a.prototype.init=function(){var a,o,n,t=e(".idea-map"),a=new google.maps.Geocoder;e.each(t,function(r,i){var d=e(i).data("location");a.geocode({address:d},function(a,i){if("OK"==i){e(".single-idea-map").show();var g={zoom:15,center:a[0].geometry.location,disableDefaultUI:!0,zoomControl:!0,fullscreenControl:!0};o=new google.maps.Map(t[r],g),n=d.substr(0,d.indexOf(","));var s=new google.maps.InfoWindow({content:"<b>"+n+"</b>"}),l=new google.maps.Marker({map:o,position:a[0].geometry.location,icon:{path:google.maps.SymbolPath.CIRCLE,strokeColor:"#E553F9",scale:7},title:d});l.addListener("click",function(){s.open(o,l)})}})})},new a}(jQuery);